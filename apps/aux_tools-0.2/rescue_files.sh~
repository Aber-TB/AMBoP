#$1 is the name of the file to be checked to see if it passes the threshold (set to 90%)


if [ "$#" -ne 1 ]; then
    echo "rescue_files.sh - a script to return the files that failed the kraken filter (>70% of reads aligning to Mycobacterium) but have enough read depth when aligning reads to reference genome, whilst having fewer than 0.3% reads be contaminants according to Kraken."
    echo "Script usage:"
    echo "rescue_files.sh <kraken output file"
    echo "---"
    
else
    number_of_reads=$(cat $1 | wc -l)
    number_of_mycobacterium=$(awk '{if ($3 ~ /Mycobacterium/) print $0}' $1 | wc -l)
    count=$(echo "${number_of_mycobacterium} / ${number_of_reads}*100" | bc -l)
    echo $1 ${count};   

fi
